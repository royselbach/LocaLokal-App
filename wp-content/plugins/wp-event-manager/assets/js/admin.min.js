var Admin=function(){var e,t,a;return{init:function(){jQuery(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),jQuery("input[name=_event_time_format]").on("change",Admin.actions.showSelectedTimeFormat),jQuery('input[data-picker="datepicker"]#_event_start_date').length>0&&jQuery('input[data-picker="datepicker"]#_event_start_date').datepicker({minDate:0,dateFormat:"yy-mm-dd"}),jQuery('input[data-picker="datepicker"]#_event_end_date').length>0&&jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker({dateFormat:"yy-mm-dd",beforeShow:function(e,t){var a=jQuery('input[data-picker="datepicker"]#_event_start_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",a)}}).on("change",function(){}),jQuery('input[data-picker="datepicker"]#_event_registration_deadline').length>0&&jQuery('input[data-picker="datepicker"]#_event_registration_deadline').datepicker({minDate:0,dateFormat:"yy-mm-dd"}),jQuery('input[data-picker="datepicker"]#_event_expiry_date').length>0&&jQuery("input#_event_expiry_date").datepicker({minDate:0,dateFormat:"yy-mm-dd",beforeShow:function(e,t){var a=jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",a)}}),jQuery('input[data-picker="datepicker"]').length>0&&jQuery('input[data-picker="datepicker"]').datepicker({minDate:0,dateFormat:"yy-mm-dd"}),jQuery("p.form-field-author").on("click",Admin.author.changeAuthor),jQuery("#setting-event_manager_submission_expire_options").on("change",Admin.settings.selectEventExpiryOption),jQuery(".wp_event_manager_upload_file_button").live("click",Admin.fileUpload.addFile),jQuery(".wp_event_manager_add_another_file_button").live("click",Admin.fileUpload.addAnotherFile)},actions:{showSelectedTimeFormat:function(e){e.preventDefault(),jQuery('input[name="_event_time_format"]').length>0&&Admin.timeFormatSettings()}},author:{changeAuthor:function(e){return jQuery(this).closest("p").find(".current-author").hide(),jQuery(this).closest("p").find(".change-author").show(),!1}},settings:{selectEventExpiryOption:function(e){"days"==jQuery("#setting-event_manager_submission_expire_options option:selected").val()?jQuery("#setting-event_manager_submission_duration").closest("tr").show():jQuery("#setting-event_manager_submission_duration").closest("tr").hide(),e.preventDefault()}},fileUpload:{addFile:function(i){i.preventDefault(),a=jQuery(this).closest(".file_url"),t=a.find("input"),e?e.open():((e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery(t).val(attachment.url)}),e.open())},addAnotherFile:function(e){e.preventDefault();jQuery(this).closest(".form-field");var t=jQuery(this).data("field_name"),a=jQuery(this).data("field_placeholder"),i=jQuery(this).data("uploader_button_text"),n=jQuery(this).data("uploader_button");jQuery(this).before('<span class="file_url"><input type="text" name="'+t+'[]" placeholder="'+a+'" /><button class="button button-small wp_event_manager_upload_file_button" data-uploader_button_text="'+i+'">'+n+"</button></span>")}}}};Admin=Admin(),jQuery(document).ready(function(e){Admin.init()});